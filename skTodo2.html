<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>SK's Todo app</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="SK">

    <!-- styles -->
	<link href="assets/styles/v2.less" rel="stylesheet/less" type="text/css" />
	<script src="assets/less.js" type="text/javascript"></script>
    
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="shortcut icon" href="assets/ico/favicon.ico">
  </head>

<body class="sk">
    <script data-dojo-config="async: true"
            src="../dojo/dojo.js"></script>
    <script>
        require([
            'skTodos/app/v2',
            'skTodos/model/Todo',
            'skTodos/model/Tag',
            'skTodos/model/TodoTagRelation',
            './fixtures/todos.js', // is that a good practice to use relative path ? but it works !
            'skTodos/fixtures/tags',
            'skTodos/fixtures/todo-tag-relations',
        ], function(
            App,
            Todo,
            Tag,
            TodoTagRelation,
            todosFixtures,
            tagsFixtures,
            todoTagRelationsFixtures
        ) {
                
            //data loading
            todosFixtures.forEach(function(item){
                Todo.put(new Todo(item));
            });
            tagsFixtures.forEach(function(item){
                Tag.put(new Tag(item));
            });
            todoTagRelationsFixtures.forEach(function(item){
                TodoTagRelation.put(new TodoTagRelation(item));
            });


            // app starting
            window.app = new App({
                todos: Todo.query(),
                tags: Tag.query(),
            });
            document.body.appendChild(app.domNode);
        });
	</script>
</body>
</html>